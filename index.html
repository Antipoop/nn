<!DOCTYPE html>
<html lang="ru" class="no-js">
  <head>
  <meta charset="UTF-8">
  <title>Pauk</title>
  <link rel="icon" type="image/png" sizes="32x32" href="img/nnlogo1.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>НН fебаные</h1>
<div id="stopwatch-container">
  <p id="stopwatch">Года:00 Месяца:00 Дни:00 
    Часы:00 Минуты:00 Секунды:00 Милиекунды:00</p>
  <div id="buttons-container">
    <button onclick="main()" id="main-btn" class="btn">Start</button>
    <button onclick="reset()" id="reset-btn" class="btn">Reset</button>
  </div>
</div>
<script>
//globle variables
var stopwatch = document.getElementById('stopwatch');
var mainButton = document.getElementById('main-btn');
var startTime=0;
var elapsedTime=0;
var timeoutId=null;

//method to operate start and stop function
function main(){
  if (mainButton.innerHTML.trim() === 'Start') {
  startTime = Date.now();
    startStopwatch();
    mainButton.innerHTML = 'Stop';
  } else {
    elapsedTime += Date.now() - startTime;
    clearTimeout(timeoutId);
    mainButton.innerHTML = 'Start';
  }
}

//method to reset the stopwatch
function reset() {
  elapsedTime = 0;
  startTime = Date.now();
  clearTimeout(timeoutId);
  mainButton.innerHTML = 'Start';
  displayTime(0, 0, 0, 0, 0, 0, 0);  
}

//method to start the stopwatch
function startStopwatch() {
  
  //run setTimeout() and save id
  timeoutId = setTimeout(function(){
    //calculate elapsed time
    const time = Date.now() - startTime + elapsedTime;
     
    //calculate different time measurements based on elapsed time
    const milliseconds = parseInt((time%1000)/10)
    const seconds = 0
    const minutes = 0
    const hour = 0
    const day = 0
    const mounth = 0
    const years = 0
    if(milliseconds === 100) {
      milliseconds = milliseconds - 100;
      seconds += 1
    }
    if (seconds === 60) {
      seconds = seconds - 60;
      minutes += 1;
    }
    if (minutes === 60) {
      minutes = minutes - 60
      hour += 1
    }
    if (hour === 24) {
      hour = hour - 24
      day += 1
    }
    if (day === 30) {
      day = day - 30;
      mounth += 1;
    }
    if (mounth === 12) {
      mounth = mounth - 12
      years += 1
    }
    //display time
    displayTime(years, mounth, day, hour, minutes, seconds, milliseconds);
     
    //calling same method again recursivaly
    startStopwatch();
  }, 100);
}

//method to display time in '00:00:00:00' format
function displayTime(years, mounth, day, hour, minutes, seconds, milliseconds) {
    years = years < 10 ? '0'+years : years;
    mounth = mounth < 10 ? '0'+mounth : mounth;
    day = day < 10 ? '0'+day : day;
    hour = hour < 10 ? '0'+hour : hour ;
    minutes = minutes < 10 ? '0'+minutes : minutes ;
    seconds = seconds < 10 ? '0'+seconds : seconds ;
    milliseconds = milliseconds < 10 ? '0'+milliseconds : milliseconds;
    stopwatch.innerHTML = ' Года:'+years+' Месяца:'+mounth+' Дни:'+day+'\n Часы:'+hour+' Минуты:'+minutes+' Секунды:'+seconds+' Милисекунды:'+milliseconds;
}
</script>
</body>
</body>